var Logger=function(){function n(){}return n.log=function(n){typeof window.console!="undefined"&&window.console.log(n)},n}(),Game29;(function(n){var s=angular.module("game29",["ngCookies","ui.bootstrap"]),r=function(){function n(n,t,i){this.$scope=n,this.$location=t,this.$cookies=i,this._game29=$.connection.game29;var r=this;this.registerScopeWatches(),this.registerScopeHandlers(r),this.registerClientCallbacks(),this.startHub(n,r)}return Object.defineProperty(n.prototype,"me",{get:function(){var n=this.$scope.me,i,r;if(!n){if(i=this.$cookies.userEmail,r=this.$cookies.userName,!i)return null;n=new t,n.Name=r,n.Email=i}return n},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"room",{get:function(){var n=this.$scope.room,t;if(!n){if(t=this.$location.path().replace("/rooms/",""),!t)return null;n=new i,n.Name=t,this.$scope.room=n}return n},enumerable:!0,configurable:!0}),n.prototype.registerScopeWatches=function(){this.$scope.$watch("room.Name",function(n){n&&this.$location.path("/rooms/"+encodeURIComponent(n))}),this.$scope.$watch("me.Email",function(n){n&&(this.$cookies.userEmail=n)}),this.$scope.$watch("me.Name",function(n){n&&(this.$cookies.userName=n)})},n.prototype.registerScopeHandlers=function(n){this.$scope.closeJoinModal=function(){this.$scope.joinModal=!this.$scope.me.Name||!this.$scope.me.Email,this.$scope.joinRoomModal=!this.$scope.joinModal&&!n.room,this.$scope.joinModal||n.join(),this.$scope.joinRoomModal||n.joinRoom()},this.$scope.closeJoinRoomModal=function(){this.$scope.joinRoomModal=!this.$scope.room.Name,this.$scope.joinRoomModal||n.joinRoom()},this.$scope.leaveRoom=function(){n.leaveRoom(this.user)},this.$scope.leaveTeam=function(){Logger.log("leaveTeam called")},this.$scope.joinModalOptions={backdrop:!1,backdropClick:!1}},n.prototype.startHub=function(n,t){$.connection.hub.start().done(function(){t.me?t.join().done(function(){t.room?t.joinRoom():(n.joinRoomModal=!0,n.$apply())}):(n.joinModal=!0,n.$apply())})},n.prototype.registerClientCallbacks=function(){var n=this;this._game29.client.userJoined=function(t){return n.userJoined(t)},this._game29.client.userLeftRoom=function(t){return n.userLeftRoom(t)},this._game29.client.trumpOpened=function(){n.$scope.$apply()}},n.prototype.userJoined=function(){Logger.log("userJoined")},n.prototype.userLeftRoom=function(){Logger.log("userLeftRoom called")},n.prototype.join=function(n){typeof n=="undefined"&&(n=this.me);var t=this;return this._game29.server.join(n).done(function(n){t.$scope.me=n,t.$scope.$apply()})},n.prototype.joinRoom=function(n){typeof n=="undefined"&&(n=this.room),this.$location.path("/rooms/"+encodeURIComponent(n.Name));var t=this;return this._game29.server.joinRoom(n).done(function(n){t.$scope.room=n,t.$scope.$apply()})},n.prototype.leaveRoom=function(n){return typeof n=="undefined"&&(n=this.me),null},n.prototype.resetRoom=function(){return null},n.prototype.showAllCards=function(n){return typeof n=="undefined"&&(n=!0),null},n.prototype.changeRoomTopic=function(){return null},n.prototype.changedMyCardValue=function(){return null},n.$inject=["$scope","$location","$cookies"],n}(),t,i,u,f,e,o,h,c,l,a,v,y,p,w;n.Game29Ctrl=r,s.controller("Game29Ctrl",r),t=function(){function n(){}return n}(),n.User=t,i=function(){function n(){}return n}(),n.Room=i,u=function(){function n(){}return n}(),n.Game=u,f=function(){function n(){}return n}(),n.RoundSet=f,e=function(){function n(){}return n}(),n.Card=e,o=function(){function n(){}return n}(),n.EmoteMessage=o,function(n){n[n.Incomplete=0]="Incomplete",n[n.TeamA=1]="TeamA",n[n.TeamB=2]="TeamB"}(n.GameResult||(n.GameResult={})),h=n.GameResult,function(n){n[n.Normal=0]="Normal",n[n.Double=1]="Double",n[n.Redouble=2]="Redouble"}(n.GameScoreType||(n.GameScoreType={})),c=n.GameScoreType,function(n){n[n.New=0]="New",n[n.WaitingForPlayers=1]="WaitingForPlayers",n[n.ReadyForGame=2]="ReadyForGame",n[n.PlayingGame=3]="PlayingGame",n[n.Closed=4]="Closed",n[n.Abandoned=5]="Abandoned"}(n.RoomState||(n.RoomState={})),l=n.RoomState,function(n){n[n.New=0]="New",n[n.MixingCards=1]="MixingCards",n[n.DistributingCards1=2]="DistributingCards1",n[n.BiddingTrump=3]="BiddingTrump",n[n.SettingTrump=4]="SettingTrump",n[n.OfferDoublePoints=5]="OfferDoublePoints",n[n.OfferRedoublePoints=6]="OfferRedoublePoints",n[n.DistributingCards2=7]="DistributingCards2",n[n.TrickPlay=8]="TrickPlay",n[n.UpdatingScore=9]="UpdatingScore",n[n.Completed=10]="Completed",n[n.Cancelled=11]="Cancelled"}(n.GameState||(n.GameState={})),a=n.GameState,function(n){n[n.Watcher=0]="Watcher",n[n.TeamA1=1]="TeamA1",n[n.TeamB1=2]="TeamB1",n[n.TeamA2=3]="TeamA2",n[n.TeamB2=4]="TeamB2"}(n.TeamPosition||(n.TeamPosition={})),v=n.TeamPosition,function(n){n[n.Spade=0]="Spade",n[n.Heart=1]="Heart",n[n.Diamond=2]="Diamond",n[n.Club=3]="Club"}(n.SuiteType||(n.SuiteType={})),y=n.SuiteType,function(n){n[n.Jack=0]="Jack",n[n.Nine=1]="Nine",n[n.Ace=2]="Ace",n[n.Ten=3]="Ten",n[n.King=4]="King",n[n.Queen=5]="Queen",n[n.Eight=6]="Eight",n[n.Seven=7]="Seven"}(n.PointCard||(n.PointCard={})),p=n.PointCard,function(n){n[n.Normal=0]="Normal",n[n.Cheers=1]="Cheers",n[n.Congrats=2]="Congrats"}(n.Emote||(n.Emote={})),w=n.Emote})(Game29||(Game29={}))