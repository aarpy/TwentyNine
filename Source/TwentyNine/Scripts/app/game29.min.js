var Logger=function(){function n(){}return n.log=function(n){typeof window.console!="undefined"&&window.console.log(n)},n}(),Game29;(function(n){var c=angular.module("game29",["ngCookies","ui.bootstrap"]),r=function(){function n(n,t,i){this.$scope=n,this.$location=t,this.$cookies=i,this._game29=$.connection.game29,this.registerScopeWatches(),this.registerScopeHandlers(),this.registerClientCallbacks(),this.startHub(n)}return Object.defineProperty(n.prototype,"me",{get:function(){var n=this.$scope.me,i,r;return n?n:(i=this.$cookies.userEmail,r=this.$cookies.userName,null)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"room",{get:function(){var n=this.$scope.room,t;if(!n){if(t=this.$location.path().replace("/rooms/",""),!t)return null;n=new i,n.Name=t,this.$scope.room=n}return n},enumerable:!0,configurable:!0}),n.prototype.registerScopeWatches=function(){var n=this;this.$scope.$watch("room.Name",function(t){t&&n.$location.path("/rooms/"+encodeURIComponent(t))}),this.$scope.$watch("me.Email",function(t){t&&(n.$cookies.userEmail=t)}),this.$scope.$watch("me.Name",function(t){t&&(n.$cookies.userName=t)})},n.prototype.registerScopeHandlers=function(){var n=this;this.$scope.closeJoinModal=function(){n.$scope.joinModal=!n.$scope.me.Name||!n.$scope.me.Email,n.$scope.joinRoomModal=!n.$scope.joinModal&&!n.room,n.$scope.joinModal||n.join(),n.$scope.joinRoomModal||n.joinRoom()},this.$scope.closeJoinRoomModal=function(){n.$scope.joinRoomModal=!n.$scope.room.Name,n.$scope.joinRoomModal||n.joinRoom()},this.$scope.leaveRoom=function(){n.leaveRoom(this.user)},this.$scope.leaveTeam=function(){Logger.log("leaveTeam called")},this.$scope.joinModalOptions={backdrop:!1,backdropClick:!1}},n.prototype.startHub=function(n){var t=this;$.connection.hub.start({transport:"longPolling"}).done(function(){t.me?t.join().done(function(){t.room?t.joinRoom():(n.joinRoomModal=!0,n.$apply())}):(n.joinModal=!0,n.$apply())})},n.prototype.registerClientCallbacks=function(){var n=this;this._game29.client.userJoined=function(t){return n.userJoined(t)},this._game29.client.userLeftRoom=function(t){return n.userLeftRoom(t)},this._game29.client.trumpOpened=function(){n.$scope.$apply()},this._game29.client.exceptionHandler=function(n){window.alert(n)}},n.prototype.userJoined=function(){Logger.log("userJoined")},n.prototype.userLeftRoom=function(){Logger.log("userLeftRoom called")},n.prototype.join=function(n){typeof n=="undefined"&&(n=this.me);var t=this;return this._game29.server.join(n).done(function(n){t.$scope.me=n,t.$scope.$apply()})},n.prototype.joinRoom=function(n){typeof n=="undefined"&&(n=this.room),this.$location.path("/rooms/"+encodeURIComponent(n.Name));var t=this;return this._game29.server.joinRoom(n).done(function(n){t.$scope.room=n,t.$scope.$apply()})},n.prototype.leaveRoom=function(n){return typeof n=="undefined"&&(n=this.me),null},n.prototype.resetRoom=function(){return null},n.prototype.showAllCards=function(n){return typeof n=="undefined"&&(n=!0),null},n.prototype.changeRoomTopic=function(){return null},n.prototype.changedMyCardValue=function(){return null},n.$inject=["$scope","$location","$cookies"],n}(),t,u,i,f,e,o,s,h,l,a,v,y,p,w,b,k;n.Game29Ctrl=r,c.controller("Game29Ctrl",r),t=function(){function n(){}return n}(),n.User=t,u=function(){function n(){}return n}(),n.Player=u,i=function(){function n(){}return n}(),n.Room=i,f=function(){function n(){}return n}(),n.Game=f,e=function(){function n(){}return n}(),n.RoundSet=e,o=function(){function n(){}return n}(),n.Card=o,s=function(){function n(){}return n}(),n.EmoteMessage=s,h=function(){function n(){}return n}(),n.CardPlayed=h,function(n){n[n.Unknown=0]="Unknown",n[n.TeamA=1]="TeamA",n[n.TeamB=2]="TeamB"}(n.PlayerTeam||(n.PlayerTeam={})),l=n.PlayerTeam,function(n){n[n.Normal=0]="Normal",n[n.Double=1]="Double",n[n.Redouble=2]="Redouble"}(n.GameScoreType||(n.GameScoreType={})),a=n.GameScoreType,function(n){n[n.New=0]="New",n[n.WaitingForPlayers=1]="WaitingForPlayers",n[n.ReadyForGame=2]="ReadyForGame",n[n.PlayingGame=3]="PlayingGame",n[n.Closed=4]="Closed",n[n.Abandoned=5]="Abandoned"}(n.RoomState||(n.RoomState={})),v=n.RoomState,function(n){n[n.New=0]="New",n[n.BiddingTrump=1]="BiddingTrump",n[n.SettingTrump=2]="SettingTrump",n[n.OfferDoublePoints=3]="OfferDoublePoints",n[n.OfferRedoublePoints=4]="OfferRedoublePoints",n[n.StartRound=5]="StartRound",n[n.ContinueRound=6]="ContinueRound",n[n.RoundCompleted=7]="RoundCompleted",n[n.GameCompleted=8]="GameCompleted",n[n.Cancelled=9]="Cancelled"}(n.GameState||(n.GameState={})),y=n.GameState,function(n){n[n.Watcher=0]="Watcher",n[n.A1=1]="A1",n[n.B1=2]="B1",n[n.A2=3]="A2",n[n.B2=4]="B2"}(n.PlayerPosition||(n.PlayerPosition={})),p=n.PlayerPosition,function(n){n[n.Spade=0]="Spade",n[n.Heart=1]="Heart",n[n.Diamond=2]="Diamond",n[n.Club=3]="Club"}(n.SuiteType||(n.SuiteType={})),w=n.SuiteType,function(n){n[n.Jack=0]="Jack",n[n.Nine=1]="Nine",n[n.Ace=2]="Ace",n[n.Ten=3]="Ten",n[n.King=4]="King",n[n.Queen=5]="Queen",n[n.Eight=6]="Eight",n[n.Seven=7]="Seven"}(n.PointCard||(n.PointCard={})),b=n.PointCard,function(n){n[n.Normal=0]="Normal",n[n.Cheers=1]="Cheers",n[n.Congrats=2]="Congrats"}(n.Emote||(n.Emote={})),k=n.Emote})(Game29||(Game29={}))